<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head.ejs') %>
        <style>
            #main-image {
                width: 50vw;
                height: 65vh;
            }

            #comment-write {
                width: 88vw;
                border: none;
                border-bottom: 1px solid black;
                outline: none;
                height: 4vh;
            }

            #comment-write:focus {
                border-bottom-width: 2px;
            }
        </style>
        <title>Blogs</title>
</head>

<body>
    <%- include('./partials/navbar.ejs') %>
        <h1 class="text-center pt-2">
            <%= blog.title %>
        </h1>
        <img id="main-image" src="<%= blog.image %>" alt="blog.image" class="mx-auto d-block mt-3">
        <p class="fs-4 mt-3 ms-3">
            <%= blog.body %>
        </p>
        <p class="mt-4 fs-5 ms-3">
            <span class="text-danger">Created By: </span>
            <img class="rounded-circle" src="<%= blog.createdBy.profileImage %>" alt="profile photo" height="40" width="40">
            <%= blog.createdBy.name %>
        </p>
        <h3 class="mt-3 ms-3 fs-1">Comments</h3>

        <form action="/blog/comment/<%= blog._id %>" method="post">
            <input 
            id="comment-write" 
            class="ms-3 mt-1 mb-2 mr-3" 
            type="text" 
            placeholder="Write a comment here..."
            name="comment">
            <button id="submit-comment" class="ms-3 btn btn-primary" type="submit">Submit</button>
        </form>

        <% comments.forEach(comment => { %>
            <div class="ms-4 mt-3">
                <div class="d-flex align-items-center">
                    <img src="<%= comment.userId.profileImage %>" alt="profile photo" width="40" height="40" class="rounded-circle">
                    <h5 class="ms-3"><%= comment.userId.name%></h5>
                </div>
                <p class="ms-3"><%= comment.content%></p>
            </div>
        <% }) %>
</body>
<%- include('./partials/scripts.ejs') %>

</html>